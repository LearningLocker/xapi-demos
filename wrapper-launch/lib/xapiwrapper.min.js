/*! xAPIWrapper v 1.10.1 | Built on 2017-07-27 16:08:46+0100 */

function toBase64(t) { return CryptoJS && CryptoJS.enc.Base64 ? CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(t)) : Base64.encode(t) } function toSHA1(t) { return CryptoJS && CryptoJS.SHA1 ? CryptoJS.SHA1(t).toString() : Crypto.util.bytesToHex(Crypto.SHA1(t, { asBytes: !0 })) } function toSHA256(t) { return CryptoJS && CryptoJS.SHA256 ? CryptoJS.SHA256(t).toString() : void 0 } function isDate(t) { if ("[object Date]" === Object.prototype.toString.call(t)) var e = t; else var e = new Date(t); return "[object Date]" === Object.prototype.toString.call(e) ? isNaN(e.valueOf()) ? (ADL.XAPIWrapper.log("Invalid date String passed"), null) : e : (ADL.XAPIWrapper.log("Invalid date object"), null) } var CryptoJS = CryptoJS || function (t, e) { var i = {}, n = i.lib = {}, r = n.Base = function () { function t() { } return { extend: function (e) { t.prototype = this; var i = new t; return e && i.mixIn(e), i.hasOwnProperty("init") || (i.init = function () { i.$super.init.apply(this, arguments) }), i.init.prototype = i, i.$super = this, i }, create: function () { var t = this.extend(); return t.init.apply(t, arguments), t }, init: function () { }, mixIn: function (t) { for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]); t.hasOwnProperty("toString") && (this.toString = t.toString) }, clone: function () { return this.init.prototype.extend(this) } } }(), s = n.WordArray = r.extend({ init: function (t, i) { t = this.words = t || [], i != e ? this.sigBytes = i : this.sigBytes = 4 * t.length }, toString: function (t) { return (t || o).stringify(this) }, concat: function (t) { var e = this.words, i = t.words, n = this.sigBytes, r = t.sigBytes; if (this.clamp(), n % 4) for (var s = 0; r > s; s++) { var a = i[s >>> 2] >>> 24 - s % 4 * 8 & 255; e[n + s >>> 2] |= a << 24 - (n + s) % 4 * 8 } else if (i.length > 65535) for (var s = 0; r > s; s += 4)e[n + s >>> 2] = i[s >>> 2]; else e.push.apply(e, i); return this.sigBytes += r, this }, clamp: function () { var e = this.words, i = this.sigBytes; e[i >>> 2] &= 4294967295 << 32 - i % 4 * 8, e.length = t.ceil(i / 4) }, clone: function () { var t = r.clone.call(this); return t.words = this.words.slice(0), t }, random: function (e) { for (var i = [], n = 0; e > n; n += 4)i.push(4294967296 * t.random() | 0); return new s.init(i, e) } }), a = i.enc = {}, o = a.Hex = { stringify: function (t) { for (var e = t.words, i = t.sigBytes, n = [], r = 0; i > r; r++) { var s = e[r >>> 2] >>> 24 - r % 4 * 8 & 255; n.push((s >>> 4).toString(16)), n.push((15 & s).toString(16)) } return n.join("") }, parse: function (t) { for (var e = t.length, i = [], n = 0; e > n; n += 2)i[n >>> 3] |= parseInt(t.substr(n, 2), 16) << 24 - n % 8 * 4; return new s.init(i, e / 2) } }, p = a.Latin1 = { stringify: function (t) { for (var e = t.words, i = t.sigBytes, n = [], r = 0; i > r; r++) { var s = e[r >>> 2] >>> 24 - r % 4 * 8 & 255; n.push(String.fromCharCode(s)) } return n.join("") }, parse: function (t) { for (var e = t.length, i = [], n = 0; e > n; n++)i[n >>> 2] |= (255 & t.charCodeAt(n)) << 24 - n % 4 * 8; return new s.init(i, e) } }, c = a.Utf8 = { stringify: function (t) { try { return decodeURIComponent(escape(p.stringify(t))) } catch (e) { throw new Error("Malformed UTF-8 data") } }, parse: function (t) { return p.parse(unescape(encodeURIComponent(t))) } }, l = (a.Base64 = { stringify: function (t) { var e = t.words, i = t.sigBytes, n = this._map; t.clamp(); for (var r = [], s = 0; i > s; s += 3)for (var a = e[s >>> 2] >>> 24 - s % 4 * 8 & 255, o = e[s + 1 >>> 2] >>> 24 - (s + 1) % 4 * 8 & 255, p = e[s + 2 >>> 2] >>> 24 - (s + 2) % 4 * 8 & 255, c = a << 16 | o << 8 | p, l = 0; 4 > l && i > s + .75 * l; l++)r.push(n.charAt(c >>> 6 * (3 - l) & 63)); var u = n.charAt(64); if (u) for (; r.length % 4;)r.push(u); return r.join("") }, parse: function (t) { var e = t.length, i = this._map, n = i.charAt(64); if (n) { var r = t.indexOf(n); -1 != r && (e = r) } for (var a = [], o = 0, p = 0; e > p; p++)if (p % 4) { var c = i.indexOf(t.charAt(p - 1)) << p % 4 * 2, l = i.indexOf(t.charAt(p)) >>> 6 - p % 4 * 2; a[o >>> 2] |= (c | l) << 24 - o % 4 * 8, o++ } return s.create(a, o) }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, n.BufferedBlockAlgorithm = r.extend({ reset: function () { this._data = new s.init, this._nDataBytes = 0 }, _append: function (t) { "string" == typeof t && (t = c.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes }, _process: function (e) { var i = this._data, n = i.words, r = i.sigBytes, a = this.blockSize, o = 4 * a, p = r / o; p = e ? t.ceil(p) : t.max((0 | p) - this._minBufferSize, 0); var c = p * a, l = t.min(4 * c, r); if (c) { for (var u = 0; c > u; u += a)this._doProcessBlock(n, u); var d = n.splice(0, c); i.sigBytes -= l } return new s.init(d, l) }, clone: function () { var t = r.clone.call(this); return t._data = this._data.clone(), t }, _minBufferSize: 0 })), u = n.Hasher = l.extend({ cfg: r.extend(), init: function (t) { this.cfg = this.cfg.extend(t), this.reset() }, reset: function () { l.reset.call(this), this._doReset() }, update: function (t) { return this._append(t), this._process(), this }, finalize: function (t) { t && this._append(t); var e = this._doFinalize(); return e }, blockSize: 16, _createHelper: function (t) { return function (e, i) { return new t.init(i).finalize(e) } }, _createHmacHelper: function (t) { return function (e, i) { return new d.HMAC.init(t, i).finalize(e) } } }), d = i.algo = {}, h = [], f = d.SHA1 = u.extend({ _doReset: function () { this._hash = new s.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]) }, _doProcessBlock: function (t, e) { for (var i = this._hash.words, n = i[0], r = i[1], s = i[2], a = i[3], o = i[4], p = 0; 80 > p; p++) { if (16 > p) h[p] = 0 | t[e + p]; else { var c = h[p - 3] ^ h[p - 8] ^ h[p - 14] ^ h[p - 16]; h[p] = c << 1 | c >>> 31 } var l = (n << 5 | n >>> 27) + o + h[p]; l += 20 > p ? (r & s | ~r & a) + 1518500249 : 40 > p ? (r ^ s ^ a) + 1859775393 : 60 > p ? (r & s | r & a | s & a) - 1894007588 : (r ^ s ^ a) - 899497514, o = a, a = s, s = r << 30 | r >>> 2, r = n, n = l } i[0] = i[0] + n | 0, i[1] = i[1] + r | 0, i[2] = i[2] + s | 0, i[3] = i[3] + a | 0, i[4] = i[4] + o | 0 }, _doFinalize: function () { var e = this._data, i = e.words, n = 8 * this._nDataBytes, r = 8 * e.sigBytes; return i[r >>> 5] |= 128 << 24 - r % 32, i[(r + 64 >>> 9 << 4) + 14] = t.floor(n / 4294967296), i[(r + 64 >>> 9 << 4) + 15] = n, e.sigBytes = 4 * i.length, this._process(), this._hash }, clone: function () { var t = u.clone.call(this); return t._hash = this._hash.clone(), t } }); return i.SHA1 = u._createHelper(f), i.HmacSHA1 = u._createHmacHelper(f), i }(Math), CryptoJS = CryptoJS || function (t, e) { var i = {}, n = i.lib = {}, r = function () { }, s = n.Base = { extend: function (t) { r.prototype = this; var e = new r; return t && e.mixIn(t), e.hasOwnProperty("init") || (e.init = function () { e.$super.init.apply(this, arguments) }), e.init.prototype = e, e.$super = this, e }, create: function () { var t = this.extend(); return t.init.apply(t, arguments), t }, init: function () { }, mixIn: function (t) { for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]); t.hasOwnProperty("toString") && (this.toString = t.toString) }, clone: function () { return this.init.prototype.extend(this) } }, a = n.WordArray = s.extend({ init: function (t, i) { t = this.words = t || [], this.sigBytes = i != e ? i : 4 * t.length }, toString: function (t) { return (t || p).stringify(this) }, concat: function (t) { var e = this.words, i = t.words, n = this.sigBytes; if (t = t.sigBytes, this.clamp(), n % 4) for (var r = 0; t > r; r++)e[n + r >>> 2] |= (i[r >>> 2] >>> 24 - 8 * (r % 4) & 255) << 24 - 8 * ((n + r) % 4); else if (65535 < i.length) for (r = 0; t > r; r += 4)e[n + r >>> 2] = i[r >>> 2]; else e.push.apply(e, i); return this.sigBytes += t, this }, clamp: function () { var e = this.words, i = this.sigBytes; e[i >>> 2] &= 4294967295 << 32 - 8 * (i % 4), e.length = t.ceil(i / 4) }, clone: function () { var t = s.clone.call(this); return t.words = this.words.slice(0), t }, random: function (e) { for (var i = [], n = 0; e > n; n += 4)i.push(4294967296 * t.random() | 0); return new a.init(i, e) } }), o = i.enc = {}, p = o.Hex = { stringify: function (t) { var e = t.words; t = t.sigBytes; for (var i = [], n = 0; t > n; n++) { var r = e[n >>> 2] >>> 24 - 8 * (n % 4) & 255; i.push((r >>> 4).toString(16)), i.push((15 & r).toString(16)) } return i.join("") }, parse: function (t) { for (var e = t.length, i = [], n = 0; e > n; n += 2)i[n >>> 3] |= parseInt(t.substr(n, 2), 16) << 24 - 4 * (n % 8); return new a.init(i, e / 2) } }, c = o.Latin1 = { stringify: function (t) { var e = t.words; t = t.sigBytes; for (var i = [], n = 0; t > n; n++)i.push(String.fromCharCode(e[n >>> 2] >>> 24 - 8 * (n % 4) & 255)); return i.join("") }, parse: function (t) { for (var e = t.length, i = [], n = 0; e > n; n++)i[n >>> 2] |= (255 & t.charCodeAt(n)) << 24 - 8 * (n % 4); return new a.init(i, e) } }, l = o.Utf8 = { stringify: function (t) { try { return decodeURIComponent(escape(c.stringify(t))) } catch (e) { throw Error("Malformed UTF-8 data") } }, parse: function (t) { return c.parse(unescape(encodeURIComponent(t))) } }, u = n.BufferedBlockAlgorithm = s.extend({ reset: function () { this._data = new a.init, this._nDataBytes = 0 }, _append: function (t) { "string" == typeof t && (t = l.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes }, _process: function (e) { var i = this._data, n = i.words, r = i.sigBytes, s = this.blockSize, o = r / (4 * s), o = e ? t.ceil(o) : t.max((0 | o) - this._minBufferSize, 0); if (e = o * s, r = t.min(4 * e, r), e) { for (var p = 0; e > p; p += s)this._doProcessBlock(n, p); p = n.splice(0, e), i.sigBytes -= r } return new a.init(p, r) }, clone: function () { var t = s.clone.call(this); return t._data = this._data.clone(), t }, _minBufferSize: 0 }); n.Hasher = u.extend({ cfg: s.extend(), init: function (t) { this.cfg = this.cfg.extend(t), this.reset() }, reset: function () { u.reset.call(this), this._doReset() }, update: function (t) { return this._append(t), this._process(), this }, finalize: function (t) { return t && this._append(t), this._doFinalize() }, blockSize: 16, _createHelper: function (t) { return function (e, i) { return new t.init(i).finalize(e) } }, _createHmacHelper: function (t) { return function (e, i) { return new d.HMAC.init(t, i).finalize(e) } } }); var d = i.algo = {}; return i }(Math); !function (t) { for (var e = CryptoJS, i = e.lib, n = i.WordArray, r = i.Hasher, i = e.algo, s = [], a = [], o = function (t) { return 4294967296 * (t - (0 | t)) | 0 }, p = 2, c = 0; 64 > c;) { var l; t: { l = p; for (var u = t.sqrt(l), d = 2; u >= d; d++)if (!(l % d)) { l = !1; break t } l = !0 } l && (8 > c && (s[c] = o(t.pow(p, .5))), a[c] = o(t.pow(p, 1 / 3)), c++), p++ } var h = [], i = i.SHA256 = r.extend({ _doReset: function () { this._hash = new n.init(s.slice(0)) }, _doProcessBlock: function (t, e) { for (var i = this._hash.words, n = i[0], r = i[1], s = i[2], o = i[3], p = i[4], c = i[5], l = i[6], u = i[7], d = 0; 64 > d; d++) { if (16 > d) h[d] = 0 | t[e + d]; else { var f = h[d - 15], g = h[d - 2]; h[d] = ((f << 25 | f >>> 7) ^ (f << 14 | f >>> 18) ^ f >>> 3) + h[d - 7] + ((g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10) + h[d - 16] } f = u + ((p << 26 | p >>> 6) ^ (p << 21 | p >>> 11) ^ (p << 7 | p >>> 25)) + (p & c ^ ~p & l) + a[d] + h[d], g = ((n << 30 | n >>> 2) ^ (n << 19 | n >>> 13) ^ (n << 10 | n >>> 22)) + (n & r ^ n & s ^ r & s), u = l, l = c, c = p, p = o + f | 0, o = s, s = r, r = n, n = f + g | 0 } i[0] = i[0] + n | 0, i[1] = i[1] + r | 0, i[2] = i[2] + s | 0, i[3] = i[3] + o | 0, i[4] = i[4] + p | 0, i[5] = i[5] + c | 0, i[6] = i[6] + l | 0, i[7] = i[7] + u | 0 }, _doFinalize: function () { var e = this._data, i = e.words, n = 8 * this._nDataBytes, r = 8 * e.sigBytes; return i[r >>> 5] |= 128 << 24 - r % 32, i[(r + 64 >>> 9 << 4) + 14] = t.floor(n / 4294967296), i[(r + 64 >>> 9 << 4) + 15] = n, e.sigBytes = 4 * i.length, this._process(), this._hash }, clone: function () { var t = r.clone.call(this); return t._hash = this._hash.clone(), t } }); e.SHA256 = r._createHelper(i), e.HmacSHA256 = r._createHmacHelper(i) }(Math), function () { var t = CryptoJS, e = t.enc.Utf8; t.algo.HMAC = t.lib.Base.extend({ init: function (t, i) { t = this._hasher = new t.init, "string" == typeof i && (i = e.parse(i)); var n = t.blockSize, r = 4 * n; i.sigBytes > r && (i = t.finalize(i)), i.clamp(); for (var s = this._oKey = i.clone(), a = this._iKey = i.clone(), o = s.words, p = a.words, c = 0; n > c; c++)o[c] ^= 1549556828, p[c] ^= 909522486; s.sigBytes = a.sigBytes = r, this.reset() }, reset: function () { var t = this._hasher; t.reset(), t.update(this._iKey) }, update: function (t) { return this._hasher.update(t), this }, finalize: function (t) { var e = this._hasher; return t = e.finalize(t), e.reset(), e.finalize(this._oKey.clone().concat(t)) } }) }(), function (t) { t.verbs = { abandoned: { id: "https://w3id.org/xapi/adl/verbs/abandoned", display: { "en-US": "abandoned" } }, answered: { id: "http://adlnet.gov/expapi/verbs/answered", display: { "de-DE": "beantwortete", "en-US": "answered", "fr-FR": "a répondu", "es-ES": "contestó" } }, asked: { id: "http://adlnet.gov/expapi/verbs/asked", display: { "de-DE": "fragte", "en-US": "asked", "fr-FR": "a demandé", "es-ES": "preguntó" } }, attempted: { id: "http://adlnet.gov/expapi/verbs/attempted", display: { "de-DE": "versuchte", "en-US": "attempted", "fr-FR": "a essayé", "es-ES": "intentó" } }, attended: { id: "http://adlnet.gov/expapi/verbs/attended", display: { "de-DE": "nahm teil an", "en-US": "attended", "fr-FR": "a suivi", "es-ES": "asistió" } }, commented: { id: "http://adlnet.gov/expapi/verbs/commented", display: { "de-DE": "kommentierte", "en-US": "commented", "fr-FR": "a commenté", "es-ES": "comentó" } }, completed: { id: "http://adlnet.gov/expapi/verbs/completed", display: { "de-DE": "beendete", "en-US": "completed", "fr-FR": "a terminé", "es-ES": "completó" } }, exited: { id: "http://adlnet.gov/expapi/verbs/exited", display: { "de-DE": "verließ", "en-US": "exited", "fr-FR": "a quitté", "es-ES": "salió" } }, experienced: { id: "http://adlnet.gov/expapi/verbs/experienced", display: { "de-DE": "erlebte", "en-US": "experienced", "fr-FR": "a éprouvé", "es-ES": "experimentó" } }, failed: { id: "http://adlnet.gov/expapi/verbs/failed", display: { "de-DE": "verfehlte", "en-US": "failed", "fr-FR": "a échoué", "es-ES": "fracasó" } }, imported: { id: "http://adlnet.gov/expapi/verbs/imported", display: { "de-DE": "importierte", "en-US": "imported", "fr-FR": "a importé", "es-ES": "importó" } }, initialized: { id: "http://adlnet.gov/expapi/verbs/initialized", display: { "de-DE": "initialisierte", "en-US": "initialized", "fr-FR": "a initialisé", "es-ES": "inicializó" } }, interacted: { id: "http://adlnet.gov/expapi/verbs/interacted", display: { "de-DE": "interagierte", "en-US": "interacted", "fr-FR": "a interagi", "es-ES": "interactuó" } }, launched: { id: "http://adlnet.gov/expapi/verbs/launched", display: { "de-DE": "startete", "en-US": "launched", "fr-FR": "a lancé", "es-ES": "lanzó" } }, mastered: { id: "http://adlnet.gov/expapi/verbs/mastered", display: { "de-DE": "meisterte", "en-US": "mastered", "fr-FR": "a maîtrisé", "es-ES": "dominó" } }, passed: { id: "http://adlnet.gov/expapi/verbs/passed", display: { "de-DE": "bestand", "en-US": "passed", "fr-FR": "a réussi", "es-ES": "aprobó" } }, preferred: { id: "http://adlnet.gov/expapi/verbs/preferred", display: { "de-DE": "bevorzugte", "en-US": "preferred", "fr-FR": "a préféré", "es-ES": "prefirió" } }, progressed: { id: "http://adlnet.gov/expapi/verbs/progressed", display: { "de-DE": "machte Fortschritt mit", "en-US": "progressed", "fr-FR": "a progressé", "es-ES": "progresó" } }, registered: { id: "http://adlnet.gov/expapi/verbs/registered", display: { "de-DE": "registrierte", "en-US": "registered", "fr-FR": "a enregistré", "es-ES": "registró" } }, responded: { id: "http://adlnet.gov/expapi/verbs/responded", display: { "de-DE": "reagierte", "en-US": "responded", "fr-FR": "a répondu", "es-ES": "respondió" } }, resumed: { id: "http://adlnet.gov/expapi/verbs/resumed", display: { "de-DE": "setzte fort", "en-US": "resumed", "fr-FR": "a repris", "es-ES": "continuó" } }, satisfied: { id: "https://w3id.org/xapi/adl/verbs/satisfied", display: { "en-US": "satisfied" } }, scored: { id: "http://adlnet.gov/expapi/verbs/scored", display: { "de-DE": "erreichte", "en-US": "scored", "fr-FR": "a marqué", "es-ES": "anotó" } }, shared: { id: "http://adlnet.gov/expapi/verbs/shared", display: { "de-DE": "teilte", "en-US": "shared", "fr-FR": "a partagé", "es-ES": "compartió" } }, suspended: { id: "http://adlnet.gov/expapi/verbs/suspended", display: { "de-DE": "pausierte", "en-US": "suspended", "fr-FR": "a suspendu", "es-ES": "aplazó" } }, terminated: { id: "http://adlnet.gov/expapi/verbs/terminated", display: { "de-DE": "beendete", "en-US": "terminated", "fr-FR": "a terminé", "es-ES": "terminó" } }, voided: { id: "http://adlnet.gov/expapi/verbs/voided", display: { "de-DE": "entwertete", "en-US": "voided", "fr-FR": "a annulé", "es-ES": "anuló" } }, waived: { id: "https://w3id.org/xapi/adl/verbs/waived", display: { "en-US": "waived" } } } }(window.ADL = window.ADL || {}), function (t) { t.activityTypes = { assessment: "http://adlnet.gov/expapi/activities/assessment", attempt: "http://adlnet.gov/expapi/activities/attempt", course: "http://adlnet.gov/expapi/activities/course", file: "http://adlnet.gov/expapi/activities/file", interaction: "http://adlnet.gov/expapi/activities/interaction", lesson: "http://adlnet.gov/expapi/activities/lesson", link: "http://adlnet.gov/expapi/activities/link", media: "http://adlnet.gov/expapi/activities/media", meeting: "http://adlnet.gov/expapi/activities/meeting", module: "http://adlnet.gov/expapi/activities/module", objective: "http://adlnet.gov/expapi/activities/objective", performance: "http://adlnet.gov/expapi/activities/performance", profile: "http://adlnet.gov/expapi/activities/profile", question: "http://adlnet.gov/expapi/activities/question", simulation: "http://adlnet.gov/expapi/activities/simulation" } }(window.ADL = window.ADL || {}), function (t) { function e(t, i) { var n = i.split("."), r = n[0]; return i = n.slice(1).join("."), t[r] || (/\[\]$/.test(r) ? (r = r.slice(0, -2), t[r] = []) : t[r] = {}), i ? e(t[r], i) : t[r] } var i = function (e, i, c) { if (e && e.actor && e.verb && e.object) { var l = e; for (var u in l) "actor" != u && "verb" != u && "object" != u && (this[u] = l[u]); e = l.actor, i = l.verb, c = l.object } e ? e instanceof n ? this.actor = e : "Agent" !== e.objectType && e.objectType ? "Group" === e.objectType && (this.actor = new r(e)) : this.actor = new n(e) : this.actor = null, i ? i instanceof s ? this.verb = i : this.verb = new s(i) : this.verb = null, c ? "Activity" !== c.objectType && c.objectType ? "Agent" === c.objectType ? c instanceof n ? this.object = c : this.object = new n(c) : "Group" === c.objectType ? c instanceof r ? this.object = c : this.object = new r(c) : "StatementRef" === c.objectType ? c instanceof o ? this.object = c : this.object = new o(c) : "SubStatement" === c.objectType ? c instanceof p ? this.object = c : this.object = new p(c) : this.object = null : c instanceof a ? this.object = c : this.object = new a(c) : this.object = null, this.generateId = function () { this.id = t.ruuid() } }; i.prototype.toString = function () { return this.actor.toString() + " " + this.verb.toString() + " " + this.object.toString() }, i.prototype.isValid = function () { return this.actor && this.actor.isValid() && this.verb && this.verb.isValid() && this.object && this.object.isValid() }, i.prototype.generateRegistration = function () { e(this, "context").registration = t.ruuid() }, i.prototype.addParentActivity = function (t) { e(this, "context.contextActivities.parent[]").push(new a(t)) }, i.prototype.addGroupingActivity = function (t) { e(this, "context.contextActivities.grouping[]").push(new a(t)) }, i.prototype.addOtherContextActivity = function (t) { e(this, "context.contextActivities.other[]").push(new a(t)) }; var n = function (t, e) { if (this.objectType = "Agent", this.name = e, t && (t.mbox || t.mbox_sha1sum || t.openid || t.account)) for (var i in t) this[i] = t[i]; else /^mailto:/.test(t) ? this.mbox = t : /^[0-9a-f]{40}$/i.test(t) ? this.mbox_sha1sum = t : /^http[s]?:/.test(t) ? this.openid = t : t && t.homePage && t.name && (this.account = t) }; n.prototype.toString = function () { return this.name || this.mbox || this.openid || this.mbox_sha1sum || this.account.name }, n.prototype.isValid = function () { return this.mbox || this.mbox_sha1sum || this.openid || this.account.homePage && this.account.name || "Group" === this.objectType && this.member }; var r = function (t, e, i) { n.call(this, t, i), this.member = e, this.objectType = "Group" }; r.prototype = new n; var s = function (t, e) { if (t && t.id) for (var i in t) this[i] = t[i]; else this.id = t, e && ("string" == typeof e || e instanceof String ? this.display = { "en-US": e } : this.display = e) }; s.prototype.toString = function () { return this.display && (this.display["en-US"] || this.display.en) ? this.display["en-US"] || this.display.en : this.id }, s.prototype.isValid = function () { return this.id }; var a = function (t, e, i) { if (t && t.id) { var n = t; for (var r in n) this[r] = n[r] } else this.objectType = "Activity", this.id = t, (e || i) && (this.definition = {}, "string" == typeof e || e instanceof String ? this.definition.name = { "en-US": e } : e && (this.definition.name = e), "string" == typeof i || i instanceof String ? this.definition.description = { "en-US": i } : i && (this.definition.description = i)) }; a.prototype.toString = function () { return this.definition && this.definition.name && (this.definition.name["en-US"] || this.definition.name.en) ? this.definition.name["en-US"] || this.definition.name.en : this.id }, a.prototype.isValid = function () { return this.id && (!this.objectType || "Activity" === this.objectType) }; var o = function (t) { if (t && t.id) for (var e in t) this[e] = t[e]; else this.objectType = "StatementRef", this.id = t }; o.prototype.toString = function () { return "statement(" + this.id + ")" }, o.prototype.isValid = function () { return this.id && this.objectType && "StatementRef" === this.objectType }; var p = function (t, e, n) { i.call(this, t, e, n), this.objectType = "SubStatement", delete this.id, delete this.stored, delete this.version, delete this.authority }; p.prototype = new i, p.prototype.toString = function () { return '"' + p.prototype.prototype.toString.call(this) + '"' }, i.Agent = n, i.Group = r, i.Verb = s, i.Activity = a, i.StatementRef = o, i.SubStatement = p, t.XAPIStatement = i }(window.ADL = window.ADL || {}), function (t) { var e = t, i = !1; "undefined" != typeof window && (e = window.ADL = t.ADL || {}, i = !0); var n = function (t) { return t.definition && t.definition.name ? e.xapiutil.getLangVal(t.definition.name) : void 0 }, r = function (t) { if ("SubStatement" === t.objectType && "SubStatement" !== t.object.objectType && !(t.id || t.stored || t.version || t.authority)) { var i = e.xapiutil.getActorId(t.actor) + ":" + e.xapiutil.getVerbDisplay(t.verb) + ":" + e.xapiutil.getObjectId(t.object); return i } }; e.xapiutil = {}, e.xapiutil.getLang = function () { var t; if ("undefined" != typeof navigator) t = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage; else if (process && process.env) { var e = process.env.LANG; t = e.slice(0, e.indexOf(".")), t = t.replace(/_/, "-") } return t || "en-US" }, e.xapiutil.getLangVal = function (t) { if (t) { var i = Object.keys(t); if (0 == i.length) return void 0; var n, r = e.xapiutil.getLang(), s = !1; do t[r] ? (n = t[r], s = !0) : r.indexOf("-") && (r = r.substring(0, r.lastIndexOf("-"))); while (!s && "" !== r); return n } }, e.xapiutil.getMoreStatements = function (t, n, r) { if (!i) throw new Error("Node not supported."); var s = []; e.XAPIWrapper.getStatements(r, null, function a(i) { if (i && i.response) { var o = JSON.parse(i.response); o.statements && (s = s.concat(o.statements), t-- <= 0 ? n(s) : o.more && "" !== o.more ? e.XAPIWrapper.getStatements(r, o.more, a) : "" === o.more && n(s)) } }) }, e.xapiutil.getActorId = function (t) { return t.mbox || t.openid || t.mbox_sha1sum || t.account }, e.xapiutil.getActorIdString = function (t) { var e = t.mbox || t.openid || t.mbox_sha1sum; return e || (e = t.account ? t.account.homePage + ":" + t.account.name : t.member ? "Anon Group " + t.member : "unknown"), e }, e.xapiutil.getActorDisplay = function (t) { return t.name || e.xapiutil.getActorIdString(t) }, e.xapiutil.getVerbDisplay = function (t) { return t ? t.display ? e.xapiutil.getLangVal(t.display) || t.id : t.id : void 0 }, e.xapiutil.getObjectType = function (t) { return t.objectType || (t.id ? "Activity" : "Agent") }, e.xapiutil.getObjectId = function (t) { if (t.id) return t.id; var i = e.xapiutil.getObjectType(t); return "Agent" === i || "Group" === i ? e.xapiutil.getActorId(t) : void 0 }, e.xapiutil.getObjectIdString = function (t) { if (!t) return "unknown"; if (t.id) return t.id; var i = e.xapiutil.getObjectType(t); return "Agent" === i || "Group" === i ? e.xapiutil.getActorIdString(t) : "SubStatement" == i ? r(t) : "unknown" }, e.xapiutil.getObjectDisplay = function (t) { if (!t) return "unknown"; var i = n(t) || t.name || t.id; if (!i) { var s = e.xapiutil.getObjectType(t); "Agent" === s || "Group" == s ? i = e.xapiutil.getActorDisplay(t) : "SubStatement" == s && (i = r(t)) } return i } }(this), function (t) { function e(t) { for (var e = window.location.search.substring(1), i = e.split("&"), n = 0; n < i.length; n++) { var r = i[n].split("="); if (decodeURIComponent(r[0]) == t) return decodeURIComponent(r[1]) } } function i(t) { return function () { var e = arguments; window.setTimeout(function () { for (var i = [], n = 0; n < e.length; n++)i.push(e[n]); t.apply(window, i) }, 0) } } function n() { var t = document.body, e = new MutationObserver(function (t) { t.forEach(function (t) { for (var e in t.addedNodes) if (t.addedNodes.hasOwnProperty(e) && t.addedNodes[e].constructor == HTMLAnchorElement) { var i = t.addedNodes[e]; r([i]) } }) }), i = { attributes: !0, childList: !0, subtree: !0 }; e.observe(t, i) } function r(t) { var i = e("xAPILaunchKey"), n = e("xAPILaunchService"), r = e("encrypted"), s = "xAPILaunchKey=" + i + "&xAPILaunchService=" + n; r && (s += "&encrypted=true"); for (var a = 0; a < t.length; a++) { var o = t[a], p = o.href, c = o.attributes.getNamedItem("courselink"); c && "true" == c.value && (p = p.indexOf("?") > -1 ? p + "&" + s : p + "?" + s, o.href = p) } } function s(t, o, p) { t = i(t); try { var c = e("xAPILaunchKey"), l = e("xAPILaunchService"); e("encrypted"); if (s.terminate = function (t) { var e = new URL(l); e.pathname += "launch/" + c + "/terminate"; var i = new XMLHttpRequest; i.withCredentials = !0, i.crossDomain = !0, i.open("POST", e.toString(), !1), i.setRequestHeader("Content-type", "application/json"), i.send(JSON.stringify({ code: 0, description: t || "User closed content" })) }, !c || !l) return t("invalid launch parameters"); var u = new URL(l); u.pathname += "launch/" + c; var d = new XMLHttpRequest; d.withCredentials = !0, d.crossDomain = !0, d.onerror = function (e) { window.setTimeout(function () { return t(e) }) }, d.onload = function (e) { if (200 !== d.status) return d.onerror(d.responseText); var i = JSON.parse(d.responseText), c = i, l = {}; l.endpoint = c.endpoint, l.actor = c.actor, l.withCredentials = !0, l.strictCallbacks = p || !1, window.onunload = function () { o && s.terminate("User closed content") }; var u = new a.XAPIWrapper.constructor; return u.changeConfig(l), r(document.body.querySelectorAll("a")), n(), t(null, i, u) }, d.open("POST", u.toString(), !0), d.send() } catch (h) { t(h) } } var a = t; a.launch = s }(window.ADL = window.ADL || {}), Date.prototype.toISOString || !function () { function t(t) { var e = String(t); return 1 === e.length && (e = "0" + e), e } Date.prototype.toISOString = function () { return this.getUTCFullYear() + "-" + t(this.getUTCMonth() + 1) + "-" + t(this.getUTCDate()) + "T" + t(this.getUTCHours()) + ":" + t(this.getUTCMinutes()) + ":" + t(this.getUTCSeconds()) + "." + String((this.getUTCMilliseconds() / 1e3).toFixed(3)).slice(2, 5) + "Z" } }(), function (t) {
    function e() { try { return void 0 != this.lrs.endpoint && "" != this.lrs.endpoint } catch (t) { return !1 } } function i(t) { if (!i.debug) return !1; try { return console.log(t), !0 } catch (e) { return !1 } } function n(t, e) { for (var r in e) if (0 != e.hasOwnProperty(r)) { prop = e[r], i(r + " : " + prop); try { e[r].constructor == Object ? t[r] = n(t[r], e[r]) : (void 0 == t && (t = new Object), t[r] = e[r]) } catch (s) { void 0 == t && (t = new Object), t[r] = e[r] } } return t } function r(t) { var e, i, r = ["endpoint", "auth", "actor", "registration", "activity_id", "grouping", "activity_platform"], s = new Object; if (e = a(), void 0 !== e && 0 !== Object.keys(e).length) { for (var o = 0; o < r.length; o++)i = r[o], e[i] && (s[i] = e[i], delete e[i]); 0 !== Object.keys(e).length && (s.extended = e), s = n(t, s) } else s = t; return s } function a() { var t, e, i, n, r; for (t = window.location.search.substr(1), e = t.split("&"), r = {}, n = 0; n < e.length; n++)i = e[n].split("="), 2 === i.length && i[0] && (r[i[0]] = decodeURIComponent(i[1])); return r } function o() { var e = new XMLHttpRequest, i = window.location + "?forcenocache=" + t.ruuid(); e.open("GET", i, !1), e.send(null) } function p(t, e, i, n) { var r = e, s = new Array, a = r.indexOf("?"); if (a > 0 && (s.push(r.substr(a + 1)), r = r.substr(0, a)), r = r + "?method=" + t, null !== i) for (var o in i) i.hasOwnProperty(o) && s.push(o + "=" + encodeURIComponent(i[o])); return null !== n && s.push("content=" + encodeURIComponent(n)), { method: "POST", url: r, headers: {}, data: s.join("&") } } i.debug = !1; var c = function () { var t = {}; return t.endpoint = "http://localhost:8000/xapi/", t.auth = "Basic " + toBase64("tom:1234"), t }(); XAPIWrapper = function (i, s) { function a(e) { var i = document.createElement("a"); return i.href = e, i.protocol && i.host ? i.protocol + "//" + i.host : void t.XAPIWrapper.log("Couldn't create base url from endpoint: " + this.lrs.endpoint) } function o(t, e, i) { t.auth = "Basic " + toBase64(e + ":" + i) } this.lrs = r(i || {}), this.lrs.user && this.lrs.password && o(this.lrs, this.lrs.user, this.lrs.password), this.base = a(this.lrs.endpoint), this.withCredentials = !1, this.withCredentials = i && i.withCredentials, this.strictCallbacks = !1, this.strictCallbacks = i && i.strictCallbacks, s && e.call(this) && window.ADL.XHR_request(this.lrs, this.lrs.endpoint + "about", "GET", null, null, function (e) { if (200 == e.status) try { var i = JSON.parse(e.response), n = !1; for (var r in i.version) if (i.version.hasOwnProperty(r) && i.version[r] == t.XAPIWrapper.xapiVersion) { n = !0; break } n || t.XAPIWrapper.log("The lrs version [" + i.version + "] does not match this wrapper's XAPI version [" + t.XAPIWrapper.xapiVersion + "]") } catch (s) { t.XAPIWrapper.log("The response was not an about object") } else t.XAPIWrapper.log("The request to get information about the LRS failed: " + e) }, null, !1, null, this.withCredentials, !1), this.searchParams = function () { var t = { format: "exact" }; return t }, this.hash = function (e) { if (!e) return null; try { return toSHA1(e) } catch (i) { return t.XAPIWrapper.log("Error trying to hash -- " + i), null } }, this.changeConfig = function (e) { try { t.XAPIWrapper.log("updating lrs object with new configuration"), this.lrs = n(this.lrs, e), e.user && e.password && this.updateAuth(this.lrs, e.user, e.password), this.base = a(this.lrs.endpoint), this.withCredentials = e.withCredentials, this.strictCallbacks = e.strictCallbacks } catch (i) { t.XAPIWrapper.log("error while changing configuration -- " + i) } }, this.updateAuth = o }, XAPIWrapper.prototype.xapiVersion = "1.0.1", XAPIWrapper.prototype.prepareStatement = function (t) { void 0 === t.actor ? t.actor = JSON.parse(this.lrs.actor) : "string" == typeof t.actor && (t.actor = JSON.parse(t.actor)), (this.lrs.grouping || this.lrs.registration || this.lrs.activity_platform) && (t.context || (t.context = {})), this.lrs.grouping && (t.context.contextActivities || (t.context.contextActivities = {}), t.context.contextActivities.grouping = [{ id: this.lrs.grouping }]), this.lrs.registration && (t.context.registration = this.lrs.registration), this.lrs.activity_platform && (t.context.platform = this.lrs.activity_platform) }, XAPIWrapper.prototype.testConfig = e, XAPIWrapper.prototype.log = i, XAPIWrapper.prototype.sendStatement = function (e, i, n) { if (this.testConfig()) { this.prepareStatement(e); var r; e.id ? r = e.id : (r = t.ruuid(), e.id = r); var s = JSON.stringify(e), a = null; n && n.length > 0 && (a = {}, s = this.buildMultipartPost(e, n, a)); var o = t.XHR_request(this.lrs, this.lrs.endpoint + "statements", "POST", s, this.lrs.auth, i, { id: r }, null, a, this.withCredentials, this.strictCallbacks); if (!i) return { xhr: o, id: r } } }, XAPIWrapper.prototype.buildMultipartPost = function (t, e, i) { t.attachments = []; for (var n = 0; n < e.length; n++)"signature" == e[n].type && (e[n].type = { usageType: "http://adlnet.gov/expapi/attachments/signature", display: { "en-US": "A JWT signature" }, description: { "en-US": "A signature proving the statement was not modified" }, contentType: "application/octet-stream" }), e[n].type.length = e[n].value.length, e[n].type.sha2 = toSHA256(e[n].value), t.attachments.push(e[n].type); var r = "", s = "\r\n", a = (Math.random() + " ").substring(2, 10) + (Math.random() + " ").substring(2, 10); i["Content-Type"] = "multipart/mixed; boundary=" + a, r += s + "--" + a + s + "Content-Type:application/json" + s + 'Content-Disposition: form-data; name="statement"' + s + s, r += JSON.stringify(t); for (var n in e) e.hasOwnProperty(n) && (r += s + "--" + a + s + "X-Experience-API-Hash:" + e[n].type.sha2 + s + "Content-Type:application/octet-stream" + s + "Content-Transfer-Encoding: binary" + s + s, r += e[n].value); return r += s + "--" + a + "--" + s }, XAPIWrapper.prototype.sendStatements = function (e, i) { if (this.testConfig()) { for (var n in e) e.hasOwnProperty(n) && this.prepareStatement(e[n]); var r = t.XHR_request(this.lrs, this.lrs.endpoint + "statements", "POST", JSON.stringify(e), this.lrs.auth, i, null, !1, null, this.withCredentials, this.strictCallbacks); if (!i) return r } }, XAPIWrapper.prototype.getStatements = function (e, i, n) { if (this.testConfig()) { var r = this.lrs.endpoint + "statements"; if (i) r = this.base + i; else { var a = new Array; for (s in e) if (e.hasOwnProperty(s)) if ("until" == s || "since" == s) { var o = new Date(e[s]); a.push(s + "=" + encodeURIComponent(o.toISOString())) } else a.push(s + "=" + encodeURIComponent(e[s])); a.length > 0 && (r = r + "?" + a.join("&")) } var p = t.XHR_request(this.lrs, r, "GET", null, this.lrs.auth, n, null, !1, null, this.withCredentials, this.strictCallbacks); if (void 0 === p || 404 == p.status) return null; try { return JSON.parse(p.response) } catch (c) { return p.response } } }, XAPIWrapper.prototype.getActivities = function (e, i) { if (this.testConfig()) { var n = this.lrs.endpoint + "activities?activityId=<activityid>"; n = n.replace("<activityid>", encodeURIComponent(e)); var r = t.XHR_request(this.lrs, n, "GET", null, this.lrs.auth, i, null, !0, null, this.withCredentials, this.strictCallbacks); if (void 0 === r || 404 == r.status) return null; try { return JSON.parse(r.response) } catch (s) { return r.response } } }, XAPIWrapper.prototype.sendState = function (e, n, r, s, a, o, p, c) { if (this.testConfig()) { var l = this.lrs.endpoint + "activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>"; l = l.replace("<activity ID>", encodeURIComponent(e)), l = l.replace("<agent>", encodeURIComponent(JSON.stringify(n))), l = l.replace("<stateid>", encodeURIComponent(r)), s && (l += "&registration=" + encodeURIComponent(s)); var u = null; o && p ? i("Can't have both If-Match and If-None-Match") : o ? u = { "If-Match": t.formatHash(o) } : p && (u = { "If-None-Match": t.formatHash(p) }); var d = "PUT"; if (!a) return this.log("No activity state was included."), !1; a instanceof Array ? (a = JSON.stringify(a), u = u || {}, u["Content-Type"] = "application/json") : a instanceof Object ? (a = JSON.stringify(a), u = u || {}, u["Content-Type"] = "application/json", d = "POST") : (u = u || {}, u["Content-Type"] = "application/octet-stream"), t.XHR_request(this.lrs, l, d, a, this.lrs.auth, c, null, null, u, this.withCredentials, this.strictCallbacks) } }, XAPIWrapper.prototype.getState = function (e, i, n, r, s, a) {
        if (this.testConfig()) {
            var o = this.lrs.endpoint + "activities/state?activityId=<activity ID>&agent=<agent>"; o = o.replace("<activity ID>", encodeURIComponent(e)), o = o.replace("<agent>", encodeURIComponent(JSON.stringify(i))), n && (o += "&stateId=" + encodeURIComponent(n)), r && (o += "&registration=" + encodeURIComponent(r)), s && (s = isDate(s), null != s && (o += "&since=" + encodeURIComponent(s.toISOString()))); var p = t.XHR_request(this.lrs, o, "GET", null, this.lrs.auth, a, null, !0, null, this.withCredentials, this.strictCallbacks);
            if (void 0 === p || 404 == p.status) return null; try { return JSON.parse(p.response) } catch (c) { return p.response }
        }
    }, XAPIWrapper.prototype.deleteState = function (e, n, r, s, a, o, p) { if (this.testConfig()) { var c = this.lrs.endpoint + "activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>"; c = c.replace("<activity ID>", encodeURIComponent(e)), c = c.replace("<agent>", encodeURIComponent(JSON.stringify(n))), c = c.replace("<stateid>", encodeURIComponent(r)), s && (c += "&registration=" + encodeURIComponent(s)); var l = null; a && o ? i("Can't have both If-Match and If-None-Match") : a ? l = { "If-Match": t.formatHash(a) } : o && (l = { "If-None-Match": t.formatHash(o) }); var u = t.XHR_request(this.lrs, c, "DELETE", null, this.lrs.auth, p, null, !1, l, this.withCredentials, this.strictCallbacks); if (void 0 === u || 404 == u.status) return null; try { return JSON.parse(u.response) } catch (d) { return u } } }, XAPIWrapper.prototype.sendActivityProfile = function (e, n, r, s, a, o) { if (this.testConfig()) { var p = this.lrs.endpoint + "activities/profile?activityId=<activity ID>&profileId=<profileid>"; p = p.replace("<activity ID>", encodeURIComponent(e)), p = p.replace("<profileid>", encodeURIComponent(n)); var c = null; s && a ? i("Can't have both If-Match and If-None-Match") : s ? c = { "If-Match": t.formatHash(s) } : a && (c = { "If-None-Match": t.formatHash(a) }); var l = "PUT"; if (!r) return this.log("No activity profile was included."), !1; r instanceof Array ? (r = JSON.stringify(r), c = c || {}, c["Content-Type"] = "application/json") : r instanceof Object ? (r = JSON.stringify(r), c = c || {}, c["Content-Type"] = "application/json", l = "POST") : (c = c || {}, c["Content-Type"] = "application/octet-stream"), t.XHR_request(this.lrs, p, l, r, this.lrs.auth, o, null, !1, c, this.withCredentials, this.strictCallbacks) } }, XAPIWrapper.prototype.getActivityProfile = function (e, i, n, r) { if (this.testConfig()) { var s = this.lrs.endpoint + "activities/profile?activityId=<activity ID>"; s = s.replace("<activity ID>", encodeURIComponent(e)), i && (s += "&profileId=" + encodeURIComponent(i)), n && (n = isDate(n), null != n && (s += "&since=" + encodeURIComponent(n.toISOString()))); var a = t.XHR_request(this.lrs, s, "GET", null, this.lrs.auth, r, null, !0, null, this.withCredentials, this.strictCallbacks); if (void 0 === a || 404 == a.status) return null; try { return JSON.parse(a.response) } catch (o) { return a.response } } }, XAPIWrapper.prototype.deleteActivityProfile = function (e, n, r, s, a) { if (this.testConfig()) { var o = this.lrs.endpoint + "activities/profile?activityId=<activity ID>&profileId=<profileid>"; o = o.replace("<activity ID>", encodeURIComponent(e)), o = o.replace("<profileid>", encodeURIComponent(n)); var p = null; r && s ? i("Can't have both If-Match and If-None-Match") : r ? p = { "If-Match": t.formatHash(r) } : s && (p = { "If-None-Match": t.formatHash(s) }); var c = t.XHR_request(this.lrs, o, "DELETE", null, this.lrs.auth, a, null, !1, p, this.withCredentials, this.strictCallbacks); if (void 0 === c || 404 == c.status) return null; try { return JSON.parse(c.response) } catch (l) { return c } } }, XAPIWrapper.prototype.getAgents = function (e, i) { if (this.testConfig()) { var n = this.lrs.endpoint + "agents?agent=<agent>"; n = n.replace("<agent>", encodeURIComponent(JSON.stringify(e))); var r = t.XHR_request(this.lrs, n, "GET", null, this.lrs.auth, i, null, !0, null, this.withCredentials, this.strictCallbacks); if (void 0 === r || 404 == r.status) return null; try { return JSON.parse(r.response) } catch (s) { return r.response } } }, XAPIWrapper.prototype.sendAgentProfile = function (e, n, r, s, a, o) { if (this.testConfig()) { var p = this.lrs.endpoint + "agents/profile?agent=<agent>&profileId=<profileid>"; p = p.replace("<agent>", encodeURIComponent(JSON.stringify(e))), p = p.replace("<profileid>", encodeURIComponent(n)); var c = null; s && a ? i("Can't have both If-Match and If-None-Match") : s ? c = { "If-Match": t.formatHash(s) } : a && (c = { "If-None-Match": t.formatHash(a) }); var l = "PUT"; if (!r) return this.log("No agent profile was included."), !1; r instanceof Array ? (r = JSON.stringify(r), c = c || {}, c["Content-Type"] = "application/json") : r instanceof Object ? (r = JSON.stringify(r), c = c || {}, c["Content-Type"] = "application/json", l = "POST") : (c = c || {}, c["Content-Type"] = "application/octet-stream"), t.XHR_request(this.lrs, p, l, r, this.lrs.auth, o, null, !1, c, this.withCredentials, this.strictCallbacks) } }, XAPIWrapper.prototype.getAgentProfile = function (e, i, n, r) { if (this.testConfig()) { var s = this.lrs.endpoint + "agents/profile?agent=<agent>"; s = s.replace("<agent>", encodeURIComponent(JSON.stringify(e))), s = s.replace("<profileid>", encodeURIComponent(i)), i && (s += "&profileId=" + encodeURIComponent(i)), n && (n = isDate(n), null != n && (s += "&since=" + encodeURIComponent(n.toISOString()))); var a = t.XHR_request(this.lrs, s, "GET", null, this.lrs.auth, r, null, !0, null, this.withCredentials, this.strictCallbacks); if (void 0 === a || 404 == a.status) return null; try { return JSON.parse(a.response) } catch (o) { return a.response } } }, XAPIWrapper.prototype.deleteAgentProfile = function (e, n, r, s, a) { if (this.testConfig()) { var o = this.lrs.endpoint + "agents/profile?agent=<agent>&profileId=<profileid>"; o = o.replace("<agent>", encodeURIComponent(JSON.stringify(e))), o = o.replace("<profileid>", encodeURIComponent(n)); var p = null; r && s ? i("Can't have both If-Match and If-None-Match") : r ? p = { "If-Match": t.formatHash(r) } : s && (p = { "If-None-Match": t.formatHash(s) }); var c = t.XHR_request(this.lrs, o, "DELETE", null, this.lrs.auth, a, null, !1, p, this.withCredentials, this.strictCallbacks); if (void 0 === c || 404 == c.status) return null; try { return JSON.parse(c.response) } catch (l) { return c } } }, t.ruuid = function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) { var e = 16 * Math.random() | 0, i = "x" == t ? e : 3 & e | 8; return i.toString(16) }) }, t.dateFromISOString = function (t) { var e = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T| ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?", i = t.match(new RegExp(e)), n = 0, r = new Date(i[1], 0, 1); i[3] && r.setMonth(i[3] - 1), i[5] && r.setDate(i[5]), i[7] && r.setHours(i[7]), i[8] && r.setMinutes(i[8]), i[10] && r.setSeconds(i[10]), i[12] && r.setMilliseconds(1e3 * Number("0." + i[12])), i[14] && (n = 60 * Number(i[16]) + Number(i[17]), n *= "-" == i[15] ? 1 : -1), n -= r.getTimezoneOffset(), time = Number(r) + 60 * n * 1e3; var s = new Date; return s.setTime(Number(time)), s }, t.XHR_request = function (e, i, n, r, s, a, c, l, u, d, h) { "use strict"; function f() { if (b) return m; b = !0; var e = l && 404 === g.status; if (!(void 0 === g.status || g.status >= 200 && g.status < 400 || e)) { var r; try { r = "There was a problem communicating with the Learning Record Store. ( " + g.status + " | " + g.response + " )" + i } catch (s) { r = s.toString() } return t.XAPIWrapper.log(r), t.xhrRequestOnError(g, n, i, a, c, h), m = g, g } if (!a) return m = g, g; if (c) h ? a(null, g, c) : a(g, c); else { var o; try { o = JSON.parse(g.responseText) } catch (p) { o = g.responseText } h ? a(null, g, o) : a(g, o) } } var g, v, y, m, S, b = !1, w = !1, x = !1, I = i.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/), C = window.location, A = {}; if (A["Content-Type"] = "application/json", A.Authorization = s, A["X-Experience-API-Version"] = t.XAPIWrapper.xapiVersion, null !== u) for (var R in u) u.hasOwnProperty(R) && (A[R] = u[R]); w = C.protocol.toLowerCase() !== I[1] || C.hostname.toLowerCase() !== I[2], w || (y = null === I[3] ? "http" === I[1] ? "80" : "443" : I[3], w = y === C.port); var _ = window.XDomainRequest && window.XMLHttpRequest && void 0 === (new XMLHttpRequest).responseType; if (w && void 0 !== _ && _ !== !1) x = !0, v = p(n, i, A, r), g = new XDomainRequest, g.open(v.method, v.url); else { g = new XMLHttpRequest, g.withCredentials = d, g.open(n, i, null != a); for (var R in A) g.setRequestHeader(R, A[R]) } if (g.onreadystatechange = function () { return 4 === g.readyState ? f() : void 0 }, g.onload = f, g.onerror = f, g.send(x ? v.data : r), !a) { if (x) for (S = 1e3 + new Date; new Date < S && 4 !== g.readyState && !b;)o(); return f() } }, t.xhrRequestOnError = function (t, e, i, n, r, s) { if (n && s) { var a, o = t ? t.status : void 0; if (a = o ? new Error("Request error: " + t.status) : 0 === o || null === o ? new Error("Request error: aborted") : new Error("Reqeust error: unknown"), r) n(a, t, r); else { var p; try { p = JSON.parse(t.responseText) } catch (c) { p = t.responseText } n(a, t, p) } } }, t.formatHash = function (t) { return "*" === t ? t : '"' + t + '"' }, t.XAPIWrapper = new XAPIWrapper(c, !1)
}(window.ADL = window.ADL || {});